{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'; \n\nexport async function getImage(searchValue, page) {\n    axios.defaults.baseURL = 'https://pixabay.com/api/';\n    const API_KEY = '43825908-e00f2a501e8ab3b01ba78a8cd';\n    const paramsString = `?key=${API_KEY}&q=${searchValue}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n  \n    try {\n      const { data } = await axios.get(paramsString);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }","export function getMarkup(imgArray, gallery) {\n    const galleryMarkup = imgArray.reduce((acc, img) => {\n      return (acc += `<div class=\"gallery-item\">\n            <a href=\"${img.largeImageURL}\"><img src=\"${img.webformatURL}\" alt=\"${img.tags}\"  width=\"360\"/></a>\n            <div class=\"info\">\n                <p>Likes <span></span>${img.likes}</span></p>\n                <p>Views <span></span>${img.views}</span></p>\n                <p>Comments <span></span>${img.comments}</span></p>\n                <p>Downloads <span></span>${img.downloads}</span></p>\n            </div>\n                </div>`);\n    }, '');\n    gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n  };","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\"; \nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImage } from \"./js/pixabay-api\";\nimport { getMarkup } from \"./js/render-functions\";\n\nconst links = {\n  formEL: document.querySelector('#form'),\n  inputEL: document.querySelector('#image-input'),\n  galleryEL: document.querySelector('#gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  loaderEl: document.querySelector('#loader-js'),\n};\n\nlet gallery = new SimpleLightbox('#gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchValue = '';\nlet page = 1;\n\nfunction submitForm(event) {\n  event.preventDefault();\n  links.loadMoreBtn.classList.remove('is-visible');\n  page = 1;\n  links.galleryEL.innerHTML = '<span class=\"loader\"></span>';\n  searchValue = links.inputEL.value.trim();\n  \n  if (searchValue === '') {\n    links.galleryEL.innerHTML = '';\n    return iziToast.show({\n      title: '<div class=\"error-remark\"><img src=\"./img/error.svg\" alt=\"error\" class=\"error-svg\"><span class=\"error-text\">Introduction field please enter the value to search</span></div>',\n      titleSize: '20px',\n      message: '',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n  }\n\n  getImage(searchValue, page).then(data => {\n    links.galleryEL.innerHTML = '';\n    \n    if (data.totalHits === 0) {\n      return iziToast.show({\n        title: '<div class=\"error-remark\"><img src=\"./img/error.svg\" alt=\"error\" class=\"error-svg\"><span class=\"error-text\">Sorry, there are no images matching your search query. Please try again!</span></div>',\n        titleSize: '20px',\n        message: '',\n        backgroundColor: 'red',\n        position: 'topRight',\n      });\n    }\n\n    getMarkup(data.hits, links.galleryEL);\n    gallery.refresh();\n\n    if (data.totalHits > 15) {\n      links.loadMoreBtn.classList.add('is-visible');\n    }\n  })\n  .catch(error => {\n    links.galleryEL.innerHTML = '';\n    iziToast.show({\n      title: '<div class=\"error-remark\"><img src=\"./img/error.svg\" alt=\"error\" class=\"error-svg\"><span class=\"error-text\">An error occurred while fetching the images. Please try again later.</span></div>',\n      titleSize: '20px',\n      message: '',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n    console.error('Error fetching images:', error);\n  });\n\n  links.formEL.reset();\n}\n\nfunction loadMore(event) {\n  links.loaderEl.innerHTML = '<span class=\"loader\"></span>';\n  page += 1;\n\n  getImage(searchValue, page).then(data => {\n    links.loaderEl.innerHTML = '';\n    getMarkup(data.hits, links.galleryEL);\n    gallery.refresh();\n\n    if (links.galleryEL) {\n      const galleryHeight = links.galleryEL.getBoundingClientRect().height;\n      window.scrollBy({\n        top: galleryHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (Math.ceil(data.totalHits / 15) === page) {\n      links.loadMoreBtn.classList.remove('is-visible');\n      iziToast.show({\n        title: '<div class=\"error-remark\"><img src=\"./img/error.svg\" alt=\"error\" class=\"error-svg\"><span class=\"error-text\">We are sorry, but you have reached the end of search results.</span></div>',\n        titleSize: '20px',\n        message: '',\n        backgroundColor: 'red',\n        position: 'topRight',\n      });\n    }\n  })\n  .catch(error => {\n    links.loaderEl.innerHTML = '';\n    iziToast.show({\n      title: '<div class=\"error-remark\"><img src=\"./img/error.svg\" alt=\"error\" class=\"error-svg\"><span class=\"error-text\">An error occurred while loading more images. Please try again later.</span></div>',\n      titleSize: '20px',\n      message: '',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n    console.error('Error loading more images:', error);\n  });\n}\n\nlinks.formEL.addEventListener('submit', submitForm);\nlinks.loadMoreBtn.addEventListener('click', loadMore);"],"names":["getImage","searchValue","page","axios","paramsString","data","error","getMarkup","imgArray","gallery","galleryMarkup","acc","img","links","SimpleLightbox","submitForm","event","iziToast","loadMore","galleryHeight"],"mappings":"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"}